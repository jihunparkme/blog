# Kafka Streams

[ì•„íŒŒì¹˜ ì¹´í”„ì¹´ ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œê·¸ë˜ë° with ìë°”](https://product.kyobobook.co.kr/detail/S000001842177) ë„ì„œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê°„ëµí•˜ê²Œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

# ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆ

> ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” í† í”½ì— ì ì¬ëœ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœê¸°ë°˜ ë˜ëŠ” ë¹„ìƒíƒœê¸°ë°˜ìœ¼ë¡œ **ì‹¤ì‹œê°„ ë³€í™˜í•˜ì—¬ ë‹¤ë¥¸ í† í”½ì— ì ì¬**í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

![Result](https://github.com/jihunparkme/blog/blob/main/img/kafka-streams/kafka-stremas.png?raw=trueÂ 'Result')

ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë‚´ë¶€ì ìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ 1ê°œ ì´ìƒ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, ìŠ¤ë ˆë“œëŠ” 1ê°œ ì´ìƒì˜ íƒœìŠ¤í¬ë¥¼ ê°€ì§
- ìŠ¤íŠ¸ë¦¼ì¦ˆì˜ `task`ëŠ” ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ ìƒê¸°ëŠ” ë°ì´í„° ì²˜ë¦¬ ìµœì†Œ ë‹¨ìœ„

## ë³‘ë ¬ì²˜ë¦¬

> ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆëŠ” ì»¨ìŠˆë¨¸ ìŠ¤ë ˆë“œë¥¼ ëŠ˜ë¦¬ëŠ” ë°©ë²•ê³¼ ë™ì¼í•˜ê²Œ ë³‘ë ¬ì²˜ë¦¬ë¥¼ ìœ„í•´ **íŒŒí‹°ì…˜**ê³¼ **ìŠ¤íŠ¸ë¦¼ì¦ˆ ìŠ¤ë ˆë“œ**(ë˜ëŠ” í”„ë¡œì„¸ìŠ¤) ê°œìˆ˜ë¥¼ ëŠ˜ë ¤ ì²˜ë¦¬ëŸ‰ í–¥ìƒ

- ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì¥ì• ê°€ ë°œìƒí•˜ë”ë¼ë„ ì•ˆì •ì ìœ¼ë¡œ ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ 2ê°œ ì´ìƒì˜ ì„œë²„ë¡œ êµ¬ì„±í•˜ì—¬ ìŠ¤íŠ¸ë¦¼ì¦ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìš´ì˜

![Result](https://github.com/jihunparkme/blog/blob/main/img/kafka-streams/parallel-stream.png?raw=trueÂ 'Result')

## í† í´ë¡œì§€

- `processor`: ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆì—ì„œ í† í´ë¡œì§€ë¥¼ ì´ë£¨ëŠ” ë…¸ë“œ
- `stream`: ë…¸ë“œì™€ ë…¸ë“œë¥¼ ì´ì€ ì„ 

ìŠ¤íŠ¸ë¦¼ì€ í† í”½ì˜ ë°ì´í„°ë¥¼ ëœ»í•˜ëŠ”ë° í”„ë¡œë“€ì„œì™€ ì»¨ìŠˆë¨¸ì—ì„œ í™œìš©í–ˆë˜ ë ˆì½”ë“œì™€ ë™ì¼
- í”„ë¡œì„¸ì„œì—ì„œ ì†ŒìŠ¤ í”„ë¡œì„¸ì„œ, ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œ, ì‹±í¬ í”„ë¡œì„¸ì„œ ì„¸ ê°€ì§€ê°€ ì¡´ì¬

ì†ŒìŠ¤ í”„ë¡œì„¸ìŠ¤
- ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìµœì´ˆë¡œ ì„ ì–¸í•´ì•¼ í•˜ëŠ” ë…¸ë“œ
- í•˜ë‚˜ ì´ìƒì˜ í† í”½ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• 

ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ìŠ¤
- ë‹¤ë¥¸ í”„ë¡œì„¸ì„œê°€ ë°˜í™˜í•œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• 
- ë³€í™˜, ë¶„ê¸°ì²˜ë¦¬ì™€ ê°™ì€ ë¡œì§ì´ ë°ì´í„° ì²˜ë¦¬ì˜ ì¼ì¢…

ì‹±í¬ í”„ë¡œì„¸ì„œ
- ë°ì´í„°ë¥¼ íŠ¹ì • ì¹´í”„ì¹´ í† í”½ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ì—­í• 
- ìŠ¤íŠ¸ë¦¼ì¦ˆë¡œ ì²˜ë¦¬ëœ ë°ì´í„°ì˜ ìµœì¢… ì¢…ì°©ì§€

![Result](https://github.com/jihunparkme/blog/blob/main/img/kafka-streams/topology.png?raw=trueÂ 'Result')

## ê°œë°œ ë°©ë²•

> ìŠ¤íŠ¸ë¦¼ì¦ˆ ê°œë°œ ë°©ë²•ì€ ë‘ ê°€ì§€
> 
> - Streams Domain Specific Language
> 
> - processor API

ğŸ‘‰ğŸ» ìŠ¤íŠ¸ë¦¼ì¦ˆDSLë¡œ êµ¬í˜„í•˜ëŠ” ë°ì´í„° ì²˜ë¦¬ ì˜ˆì‹œ
- ë©”ì‹œì§€ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ í† í”½ ë¶„ê¸° ì²˜ë¦¬
- ì§€ë‚œ 10ë¶„ê°„ ë“¤ì–´ì˜¨ ë°ì´í„°ì˜ ê°œìˆ˜ ì§‘ê³„
- í† í”½ê³¼ ë‹¤ë¥¸ í† í”½ì˜ ê²°í•©ìœ¼ë¡œ ìƒˆë¡œìš´ ë°ì´í„° ìƒì„±

ğŸ‘‰ğŸ» í”„ë¡œì„¸ì„œ APIë¡œ êµ¬í˜„í•˜ëŠ” ë°ì´í„° ì²˜ë¦¬ ì˜ˆì‹œ
- ë©”ì‹œì§€ ê°’ì˜ ì¢…ë¥˜ì— ë”°ë¼ í† í”½ì„ ê°€ë³€ì ìœ¼ë¡œ ì „ì†¡
- ì¼ì •í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë°ì´í„° ì²˜ë¦¬

# ìŠ¤íŠ¸ë¦¼ì¦ˆ DSL

ìŠ¤íŠ¸ë¦¼ì¦ˆDSLì—ëŠ” ë ˆì½”ë“œì˜ íë¦„ì„ ì¶”ìƒí™”í•œ 3ê°€ì§€ ê°œë…ì¸ `KStream`, `KTable`, `GlobalKTable`

## KStream

> ë ˆì½”ë“œì˜ íë¦„ì„ í‘œí˜„í•œ ê²ƒìœ¼ë¡œ ë©”ì‹œì§€ í‚¤ì™€ ë©”ì‹œì§€ ê°’ìœ¼ë¡œ êµ¬ì„±

`KStream`ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ë©´ **í† í”½ì— ì¡´ì¬í•˜ëŠ”(ë˜ëŠ” KStreamì— ì¡´ì¬í•˜ëŠ”) ëª¨ë“  ë ˆì½”ë“œ**ê°€ ì¶œë ¥

![Result](https://github.com/jihunparkme/blog/blob/main/img/kafka-streams/kstream-example.png?raw=trueÂ 'Result')