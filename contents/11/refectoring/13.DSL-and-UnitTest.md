# DSL-and-UnitTest

## 응집도와 결합도

응집도와 결합도
- 결합도: 서로 다른 모듈 간에 상호 의존하는 정도 또는 연관된 관계
 - 낮은 결합도를 가진 클래스는 변경과 재사용이 유용
- 응집도: 한 모듈 내부의 처리 요소들이 서로 관련되어 있는 정도
 - 하나의 기능 중심으로 책임이 잘 뭉쳐있는 높은 응집도를 가진 모듈이 좋음

## 단위 테스트의 늪

```java
class ContinentSpecificationShould {
    @Test
    public void specified_with_a_planet() {
        Planet planet = new Planet(new
                Atmosphere(Money.wons(5000),
                            element("N", Ratio.of(0.8)),
                            element("O", Ratio.of(0.2))), 
                Arrays.asList(
                            new Continent("아시아"),
                            new Continent("유럽")),
                Arrays.asList(
                            new Ocean("태평양",Money.wons(1000)),
                            new Ocean("대서양", Money.wons(1000))));
        
        ContinentSpecification specification = new ContinentSpecification(2);
        
        assertTrue(specification.test(planet));
    }
}
```

**애매한 테스트(OBSCURE TEST)**

- 픽스처와 무관한 정보를 너무 상세하게 노출 (중요한 로직 파악 어려움)
- 생성자에 전달된 인자 중 테스트에서 검증하려는 대륙의 수와 관련이 있는 것은 Continent 뿐
- 테스트하려는 행위와 무관한 정보는 테스트의 목적을 흐리고, 가독성을 저하

**깨지기 쉬운 테스트(FRAGILE TEST)**

- 생성자의 시그니처가 변경될 경우 객체들을 사용하는 모든 테스트 케이스를 수정해야 함
  - 인터페이스에 민감함(Interface Sensitivity) 문제
  - 생성자를 여러 테스트 케이스에서 호출한다면 문제가 더 커짐

## 테스트 코드 리팩토링

### 생성 메서드

**Creation Method**

### 매개 변수화된 생성 메소드

**Parameterized Creation Method**

### 슈퍼 클래스를 이용한 생성 메서드의 중복 제거

**TESTCASE SUPERCLASS**

### FACTORY를 이용한 생성 메서드 중복 제거

**CREATION METHOD using Test Helper**