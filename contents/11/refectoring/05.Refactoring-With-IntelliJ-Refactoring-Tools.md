# Refactoring With IntelliJ Refactoring Tools

## [Change Signature](https://www.jetbrains.com/help/idea/change-signature.html)

- 클래스의 생성자에 parameter 추가

## [Convert Anonymous to Inner Class](https://www.jetbrains.com/help/idea/convert-anonymous-to-inner.html)

- 익명 클래스를 내부 클래스로 변환
- New 또는 생성자에 커서를 위치시키고 리팩토링

**Before**

```java
public class Class {
    public Interface method() {
        final int i = 0;
        return new Interface() {
            public int publicMethod() {
            return i;}
        };
    }
}
```

**After**

```java
public class Class {
    public Interface method() {
        final int i = 0;
        return new MyInterfaceClass(i);
    }
}
public class MyInterfaceClass implements Interface {
    private final int
               i;
    public MyInterfaceClass(int i) {
        this.i = i;
    }
    public int publicMethod() {
        return
               i;
    }
}
```

## [Convert to Instance Method](https://www.jetbrains.com/help/idea/convert-to-instance-method.html)

- static 메서드를 인스턴스 메서드로 변환
- 메소드명에 커서를 위치시키고 리팩토링

**Before**

```java
public class MyClass {
     ClassA classA = new ClassA();
     ClassB classB = new ClassB();

     static public void greatMethod(ClassA classA, ClassB classB){
         System.out.println("classA = " + classA);
         System.out.println("classB = " + classB);
     }
     public void myMethod(){
         MyClass.greatMethod(classA, classB);
     }
}
```

**After**

```java
public class MyClass {
    ClassA classA = new ClassA();
    ClassB classB = new ClassB();

    public void myMethod(){
        classB.greatMethod(classA);
    }
}

public class ClassB {
    public void greatMethod(ClassA classA) {
        System.out.println("classA = " + classA);
        System.out.println("classB = " + this);
    }
}
```

## [Encapsulate Fields](https://www.jetbrains.com/help/idea/encapsulate-fields.html)

- public 필드를 private로 캡슐화 및 getter/setter 생성
- 필드명에 커서를 위치시키고 리팩토링

**Before**

```java
public class Class {
    public String aString;
}
```

**After**

```java
public class Class {
    private String aString;
    public void setaString(String aString) {
        this.aString = aString;
    }
    public String getaString() {
        return aString;
    }
}
```

## [Introduce Constants](https://www.jetbrains.com/help/idea/extract-constant.html#d50ea7e5)

- 변수를 private static final 로
- 변수에 커서를 위치시키고 리팩토링

**Before**

```java
public class Class {
    public void method() {
        ArrayList list = new ArrayList();
        list.add("string");
        anotherMethod("string");
    }

    private void anotherMethod(String string) {
    }
}
```

**After**

```java
public class Class {
    private static final String STRING = "string";

    public void method() {
        ArrayList list = new ArrayList();
        list.add(STRING);
        anotherMethod(STRING);
    }

    private void anotherMethod(String string) {
    }
}
```

## [Extract Interface](https://www.jetbrains.com/help/idea/extract-interface.html)

- 인터페이스 추출

**Before**

```java
// File AClass.java
class AClass {
    public static final double CONSTANT = 3.14;

    public void publicMethod() {
    }

    public void secretMethod() {

    }
}
```

**After**

```java
// File AClass.java
class AClass implements AnInterface {
    public void publicMethod() {
    }

    public void secretMethod() {
    }

    // File AnInterface.java
    public interface AnInterface {
        double CONSTANT = 3.14;

        void publicMethod();
    }
}
```

## [Extract Method](https://www.jetbrains.com/help/idea/extract-method.html)

- 메서드 추출

**Before**

```java
public void method() {
    int a=1;
    int b=2;
    int c=a+b;
    int d=a+c;
}
```

**After**

```java
public void method() {
    int a=1;
    int b=2;
    int c=add(a,b);
    int d=add(a,c);
}
...
private int add(int a, int b) {
    return a+b;
}
```

## [Extract Super Class](https://www.jetbrains.com/help/idea/extract-superclass.html)

- 슈퍼 클래스로 추출

**Before**

```java
// File Class.java
public class Class {
    public int varInt;
    private double varDouble;
    public static final int CONSTANT = 0;
    public void publicMethod() {
        ...
    }
    public void hiddenMethod() {
        ...
    }
    public void setVarDouble(double var) {
        this.varDouble = var;
    }
    public double getVarDouble() {
        return
                  varDouble;
    }
}
```

**After**

```java
// File Class.java
public class Class extends SuperClass {
    public int varInt;
    public void publicMethod() {
    ...
    }
    public void hiddenMethod() {
    ...
    }
}

// NEW file SuperClass.java
public abstract class SuperClass {
    private double varDouble;
    public static final int CONSTANT = 0;
    public abstract void publicMethod();
    public void setVarDouble(double var) {
        this.varDouble = var;
    }
    public double getVarDouble() {
        return varDouble;
    }
}
```

## [Introduce Variable](https://www.jetbrains.com/help/idea/extract-variable.html#d57e1dd)

- 중복 변수를 필드로
- 변수 선택 후 리팩토링

**Before**

```java
public void method() {
    int a = 1;
...
    int b = a + anotherClass.intValue();
    int c = b + anotherClass.intValue();
}
```

**After**

```java
public void method() {
    int a = 1;
...
    int number = anotherClass.intValue();
    int b = a + number;
    int c = b + number;
}
```

## [Introduce Parameter](https://www.jetbrains.com/help/idea/extract-parameter.html)

- 변수를 파라미터로 추출

**Before**

```java
public class HelloWorldPrinter {
    public static void print() {
        System.out.println(generateText());
    }
    private static String generateText() {
        return "Hello, World!".toUpperCase();
    }
}
```

**After**

```java
public class HelloWorldPrinter {
    public static void print() {
        System.out.println(generateText("Hello, World!"));
    }
    private static String generateText(String text) {
        return text.toUpperCase();
    }
}
```

## [Extract Delegate](https://www.jetbrains.com/help/idea/extract-into-class-refactorings.html#extract_delegate)

- 위임 클래스로 추출
- Before 
  
```java
public class Foo {
    private String b;
    public String getInfo() {
        return ("(" + b + ")");
    }
...
}

public class Bar {
    Foo foo;
    String t2 = foo.getInfo();
...
}
```

- After

```java
public class Foo {
    private final Info info = new Info();
    public String getInfo() {
        return info.getInfo();
    }
...
}

public class Info {
    private String b;
    public Info() {}
    public String getInfo() {
        return ("(" + b + ")");
    }
}

public class Bar {
    Foo foo;
    String t2 = foo.getInfo();
...
}
```

## [Replace Method with Method Object](https://github.com/msbaek/refactoring-tools#replace-method-with-method-object)

- 메서드를 메서드 개체로 바꾸기

## [Replace Conditional Logic with Strategy Pattern](https://www.jetbrains.com/help/idea/replace-conditional-logic-with-strategy-pattern.html#fa1a7149)

- 조건부 논리를 전략 패턴으로 바꾸기

## Generify

- 일반화

**Before**

```java
List list = new LinkedList();
list.add("string");
```

**After**

```java
List<String> list = new LinkedList<>();
list.add("string");
```

## [Inline Constructor](https://github.com/msbaek/refactoring-tools#inline-constructor)

- 불필요한 생성자를 인라인

**Before**

```java
public class Class {
    public int varInt;
    public Class() {
        this(0);
    }

    public Class(int i) {
        varInt=i;
    }

    public void method() {
        Class aClass=new Class();
        ...
    }
}
```

**After**

```java
public class Class {
    public int varInt;
    public Class(int i) {
        varInt=i;
    }
    public void method() {
        Class aClass=new Class(0);
        ...
    }
} 
```

## [Inline Superclass](https://www.jetbrains.com/help/idea/inline.html#inline_superclass)

- 불필요한 슈퍼클래스를 인라인

**Before**

```java
public class Bar {
    ...
    int calculations1() { ... }
    int calculations2() { ... }
}

class Foo extends Bar {
    int someMethod() {
        ...
        if (something > calculations1()) {
            ...
            return calculations2();
        }
        ...
    }
}
```

**After**

```java
class Foo {
    ...
    int someMethod() {
        ...
        if (something > calculations1()) {
            ...
            return calculations2();
        }
        ...
    }
    int calculations1() {...}
    int calculations2() {...}
}
```

## [Inline To Anonymous Class](https://www.jetbrains.com/help/idea/inline.html#inline_anonymous_class)

- 익명 클래스로 인라인

**Before**

```java
import java.util.*;
public class Main {
    public class MyComparator implements Comparator<String> {
        @Override
        public int compare(String s1, String s2) {
            return 0;
        }
    }

    void sort(List<String> scores) {
        scores.sort(new MyComparator());
    }
}
```

**After**

```java
import java.util.*;

public class Main {

    void sort(List<String> scores) {
        scores.sort((s1, s2) -> 0);
    }
}
```

## [Invert Boolean](https://www.jetbrains.com/help/idea/invert-boolean-refactoring.html)

- 불린 결과값을 반대로 변환

**Before**

```java
private double a;
...
public boolean method() {
    if (a > 15 && a < 100) {
        a = 5;
        return true;
    }
    return false;
}
```

**After**

```java
private double a;
...
public boolean method() {
    if (a > 15 && a < 100) {
        a = 5;
        return false;
    }
    return true;
}
```

## Make Static

- ㅁ

**Before**

```java
```

**After**

```java
```

## Migrate

- ㅁ

**Before**

```java
```

**After**

```java
```

## Copy Class

- ㅁ

**Before**

```java
```

**After**

```java
```

## Move Method

- ㅁ

**Before**

```java
```

**After**

```java
```

## Pull Members Up

- ㅁ

**Before**

```java
```

**After**

```java
```

## Remove Middleman

- ㅁ

**Before**

```java
```

**After**

```java
```

## Replace Constructor with Builder

- ㅁ

**Before**

```java
```

**After**

```java
```

## Replace Constructor with Factory Method

- ㅁ

**Before**

```java
```

**After**

```java
```

## Replace Inheritance with Delegation

- ㅁ

**Before**

```java
```

**After**

```java
```

## Replace Temp with Query

- ㅁ

**Before**

```java
```

**After**

```java
```

## Type Migration

- ㅁ

**Before**

```java
```

**After**

```java
```

## Wrap Return Value

- ㅁ

**Before**

```java
```

**After**

```java
```

## Reference

> [IntelliJ IDE Code refactoring](https://www.jetbrains.com/help/idea/refactoring-source-code.html)
> 
> [refactoring-tools](https://github.com/msbaek/refactoring-tools)