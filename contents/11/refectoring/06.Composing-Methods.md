# Composing Methods

- 대부분의 리팩터링은 메서드를 적절히 패키징하는 것
- `Extract Method`로 메서드의 길이를 줄여보자
  - 지역 변수, 임수 변수들로 메서드 추출이 어렵다면
  - `Replace Temp with Query`로 임시 변수를 제거하거나,
  - 임시 변수가 여러번 사용된다면 `Split Temporary Variable`로 임시 변수를 교체하기 쉽게 변경하거나,
  - 임시 변수들이 교체하기 어렵게 뒤엉켜 있다면 `Replace Method with Method Object`,
  - 변경되지 않는 파라미터가 assign되어 변경되고 있다면 `Remove Assignments to Parameters`

## Extract Method

**그룹핑해야 할 코드 조각들이 있다면 `의도(목적)를 드러내는 이름의 메서드`로 추출**

- 메서드가 길거나 의도를 나타내는 주석이 필요한 경우 적용
- 작은 메서드는 좋은 이름을 가지고 있을 때 제대로 동작 (좋은 이름을 짓는데 노력하자)
  - 메서드의 의도를 더 잘 나타낼 수 있는 메서드명이 있다면 추출하고, 의도를 드러낼 의미있는 이름이 없다면 추출하지 말자
- 여러 개의 로컬 변수가 존재할 경우
  - Split Temporary Variable
  - Replace Temp With Query

**Before**

```java
void printOwing(double invoice) {
    printBanner();

    // print details
    System.out.println("name:" + _name);
    System.out.println("invoice:" + invoice);
}
```

**After**

```java
void printOwing(double invoice) {
    printBanner();
    printDetails(invoice);
}

void printDetails(double invoice) {
    System.out.println("name:" + _name);
    System.out.println("invoice:" + invoice);
}
```

## Inline Method

**메서드의 행동이 메서드 이름만큼 명확한 경우 적용**

- 모든 메서드들이 다른 메서드에 단순히 위임하는 경우에도 적용 가능
- 서브클래스가 오버라이드하는 경우는 인라인하지 말자

**Before**

```java
int getRaiting() { 
    return moreThanFiveLateDeliveries() ? 2 : 1; 
}

boolean moreThanFiveLateDeliveries() { 
    return numberOfLaterDeliveries > 5; 
}
```

**After**

```java
int getRaiting() { 
    return numberOfLaterDeliveries > 5 ? 2 : 1; 
}
```

## Inline Temp

**리팩터링을 방해하는 임시 변수(한 번만 호출되는)에 대한 참조를 표현식으로 치환**

- Replace Temp With Query의 일환으로 수행
- 함수 호출 시 side-effects가 있는지 확인
- 임시 변수를 final로 변경하고 컴파일 확인

**before**

```java
double basePrice = anOrder.basePrice();
return (basePrice > 1000)
```

**After**

```java
return (anOrder.basePrice() > 1000)
```









**before**

```java
```

**After**

```java
```



## Reference

> [Composing Methods](https://www.evernote.com/shard/s3/client/snv?noteGuid=0fd811b9-dc83-4828-a8ba-fb90195271eb&noteKey=28d9042f200c34cc8a15450fea2e19db&sn=https%3A%2F%2Fwww.evernote.com%2Fshard%2Fs3%2Fsh%2F0fd811b9-dc83-4828-a8ba-fb90195271eb%2F28d9042f200c34cc8a15450fea2e19db&title=Ch06.%2BComposing%2BMethods)